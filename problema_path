
# Comprobar que GRC ve los bloques instalados

gnuradio-config-info --prefs | grep -E 'blocks_path|grc'

gnuradio.iio disponible?: False
radar (gr-radar) disponible?: False
[grc]
global_blocks_path = /usr/local/share/gnuradio/grc/blocks
local_blocks_path = 
[grc-docs]
analog@analog:~ $ 
analog@analog:~ $ mkdir -p ~/.gnuradio

cat > ~/.gnuradio/config.conf << 'EOF'

[grc]

# Acepta varios paths separados por ';'

global_blocks_path=/usr/local/share/gnuradio/grc/blocks;/usr/share/gnuradio/grc/blocks

local_blocks_path=

EOF



# Limpia la caché de GRC

rm -rf ~/.cache/gnuradio/grc_*


analog@analog:~ $ 
analog@analog:~ $ gnuradio-config-info --prefs | grep -E 'blocks_path|grc'

[grc]
global_blocks_path = /usr/local/share/gnuradio/grc/blocks;/usr/share/gnuradio/grc/blocks
local_blocks_path = 
[grc-docs]
analog@analog:~ $ 
@analog:~ $ 
analog@analog:~ $ gnuradio-config-info --prefs | grep -E 'blocks_path|grc'

[grc]
global_blocks_path = /usr/local/share/gnuradio/grc/blocks;/usr/share/gnuradio/grc/blocks
local_blocks_path = 
[grc-docs]
analog@analog:~ $ python3 - <<'PY'

import importlib.util as U, sys

print("Python:", sys.version)

print("iio disponible?:", U.find_spec("iio") is not None)

print("radar disponible?:", U.find_spec("radar") is not None)

if U.find_spec("iio"):

    import iio

    print("iio.__file__:", getattr(iio, "__file__", None))

    print("tiene fmcomms5_source_f32c?:", hasattr(iio, "fmcomms5_source_f32c"))

PY

Python: 3.9.2 (default, Mar 20 2025, 22:21:41) 
[GCC 10.2.1 20210110]
iio disponible?: True
radar disponible?: False

A module that was compiled using NumPy 1.x cannot be run in
NumPy 2.0.2 as it may crash. To support both 1.x and 2.x
versions of NumPy, modules must be compiled with NumPy 2.0.
Some module may need to rebuild instead e.g. with 'pybind11>=2.12'.

If you are a user of the module, the easiest solution will be to
downgrade to 'numpy<2' or try to upgrade the affected module.
We expect that some modules will need time to support NumPy 2.

Traceback (most recent call last):  File "<stdin>", line 12, in <module>
  File "/usr/lib/python3/dist-packages/iio/__init__.py", line 40, in <module>
    from .attr_updater import attr_updater
  File "/usr/lib/python3/dist-packages/iio/attr_updater.py", line 24, in <module>
    from gnuradio import gr
  File "/usr/local/lib/python3.9/dist-packages/gnuradio/gr/__init__.py", line 26, in <module>
    from .gr_python import *
AttributeError: _ARRAY_API not found

A module that was compiled using NumPy 1.x cannot be run in
NumPy 2.0.2 as it may crash. To support both 1.x and 2.x
versions of NumPy, modules must be compiled with NumPy 2.0.
Some module may need to rebuild instead e.g. with 'pybind11>=2.12'.

If you are a user of the module, the easiest solution will be to
downgrade to 'numpy<2' or try to upgrade the affected module.
We expect that some modules will need time to support NumPy 2.

Traceback (most recent call last):  File "<stdin>", line 12, in <module>
  File "/usr/lib/python3/dist-packages/iio/__init__.py", line 40, in <module>
    from .attr_updater import attr_updater
  File "/usr/lib/python3/dist-packages/iio/attr_updater.py", line 24, in <module>
    from gnuradio import gr
  File "/usr/local/lib/python3.9/dist-packages/gnuradio/gr/__init__.py", line 30, in <module>
    from .gr_python import *
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/gnuradio/gr/__init__.py", line 26, in <module>
    from .gr_python import *
ImportError: ImportError: numpy.core.multiarray failed to import

During handling of the above exception, another exception occurred:

AttributeError: _ARRAY_API not found
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/gnuradio/gr/__init__.py", line 26, in <module>
    from .gr_python import *
ImportError: ImportError: numpy.core.multiarray failed to import

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "<stdin>", line 12, in <module>
  File "/usr/lib/python3/dist-packages/iio/__init__.py", line 40, in <module>
    from .attr_updater import attr_updater
  File "/usr/lib/python3/dist-packages/iio/attr_updater.py", line 24, in <module>
    from gnuradio import gr
  File "/usr/local/lib/python3.9/dist-packages/gnuradio/gr/__init__.py", line 30, in <module>
    from .gr_python import *
ImportError: ImportError: numpy.core.multiarray failed to import
analog@analog:~ $ 
analog@analog:~ $ # 1) Quita NumPy instalado con pip (el que trajo la 2.x)

sudo -H python3 -m pip uninstall -y numpy



# 2) Reinstala el NumPy del sistema (1.x)

sudo apt-get update

sudo apt-get install --reinstall python3-numpy



# 3) Verifica la versión cargada y su ubicación

python3 -c "import numpy, sys; print('NumPy:', numpy.__version__, 'from', numpy.__file__)"

[sudo] password for analog: 

Found existing installation: numpy 2.0.2
Uninstalling numpy-2.0.2:
  Successfully uninstalled numpy-2.0.2
Get:1 http://raspbian.raspberrypi.org/raspbian bullseye InRelease [15.0 kB]
Get:2 http://archive.raspberrypi.org/debian bullseye InRelease [39.0 kB]
Get:3 http://raspbian.raspberrypi.org/raspbian bullseye/main armhf Packages [13.2 MB]
Get:4 http://archive.raspberrypi.org/debian bullseye/main armhf Packages [330 kB]
Fetched 13.6 MB in 21s (657 kB/s)                                              
Reading package lists... Done
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
0 upgraded, 0 newly installed, 1 reinstalled, 0 to remove and 15 not upgraded.
Need to get 2,930 kB of archives.
After this operation, 0 B of additional disk space will be used.
Get:1 http://espejito.fder.edu.uy/raspbian/raspbian bullseye/main armhf python3-numpy armhf 1:1.19.5-1 [2,930 kB]
Fetched 2,930 kB in 2s (1,392 kB/s)        
(Reading database ... 194475 files and directories currently installed.)
Preparing to unpack .../python3-numpy_1%3a1.19.5-1_armhf.deb ...
Unpacking python3-numpy (1:1.19.5-1) over (1:1.19.5-1) ...
Setting up python3-numpy (1:1.19.5-1) ...
NumPy: 1.19.5 from /usr/lib/python3/dist-packages/numpy/__init__.py

analog@analog:~ $ python3 - <<'PY'

import sys, importlib.util as U

print("Python:", sys.version)

# 1) GNU Radio

import gnuradio

from gnuradio import gr, blocks

print("OK: gnuradio importado desde:", gnuradio.__file__)

# 2) gr-iio (los bloques de IIO para GRC)

print("iio (gr-iio) disponible?:", U.find_spec("iio") is not None)

import iio

print("iio.__file__:", getattr(iio, "__file__", None))

print("Tiene fmcomms5_source_f32c?:", hasattr(iio, "fmcomms5_source_f32c"))

PY

Python: 3.9.2 (default, Mar 20 2025, 22:21:41) 
[GCC 10.2.1 20210110]
OK: gnuradio importado desde: /usr/local/lib/python3.9/dist-packages/gnuradio/__init__.py
iio (gr-iio) disponible?: True
iio.__file__: /usr/lib/python3/dist-packages/iio/__init__.py
Tiene fmcomms5_source_f32c?: True
nalog@analog:~ $ python3 - <<'PY'

import sys, importlib.util as U

print("Python:", sys.version)

print("radar disponible?:", U.find_spec("radar") is not None)

if U.find_spec("radar"):

    import radar, os

    print("radar.__file__:", radar.__file__)

PY

Python: 3.9.2 (default, Mar 20 2025, 22:21:41) 
[GCC 10.2.1 20210110]
radar disponible?: False
analog@analog:~ $ # Para esta sesión de shell

export PYTHONPATH=/usr/local/lib/python3/dist-packages:/usr/local/lib/python3.9/dist-packages:$PYTHONPATH

export GRC_BLOCKS_PATH=/usr/local/share/gnuradio/grc/blocks:/usr/share/gnuradio/grc/blocks

export LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH



# Vuelve a probar el paso 1 y 2

python3 -c "import importlib.util as U; print('radar?', U.find_spec('radar') is not None)"

radar? False
analog@analog:~ $ 
analog@analog:~ $ # ¿Hay bloques de radar en GRC?

ls -1 /usr/local/share/gnuradio/grc/blocks | grep -i radar || true

ls -1 /usr/share/gnuradio/grc/blocks | grep -i radar || true



# ¿Hay librerías nativas instaladas?

ls -l /usr/local/lib/libgnuradio-radar* 2>/dev/null || true

ls -l /usr/lib/libgnuradio-radar* 2>/dev/null || true

ldconfig -p | grep -i radar || true



# ¿Hay algún paquete Python llamado radar?

python3 - <<'PY'

import pkgutil, sys

mods = [m.name for m in pkgutil.iter_modules() if 'radar' in m.name.lower()]

print("Módulos que contienen 'radar':", mods)

PY



# Por si quedó instalado en rutas “raras”

sudo updatedb 2>/dev/null || true

locate -i "radar" | grep -E "gnuradio|grc|site-packages|dist-packages|libgnuradio" | head -n 80

qtgui_distanceradar.block.yml
Módulos que contienen 'radar': []
[sudo] password for analog: 
/home/analog/gnuradio/build/gr-qtgui/python/qtgui/distanceradar.pyc
/home/analog/gnuradio/build/gr-qtgui/python/qtgui/distanceradar.pyo
/home/analog/gnuradio/gr-qtgui/examples/test_distanceradar.grc
/home/analog/gnuradio/gr-qtgui/grc/qtgui_distanceradar.block.yml
/home/analog/gnuradio/gr-qtgui/python/qtgui/distanceradar.py
/home/analog/gr-radar/build/lib/cmake/Modules/gnuradio-radarConfig.cmake
/home/analog/gr-radar/cmake/Modules/gnuradio-radarConfig.cmake
/home/analog/gr-radar/examples/simulation/simulator_cw.grc
/home/analog/gr-radar/examples/simulation/simulator_dual_cw.grc
/home/analog/gr-radar/examples/simulation/simulator_dual_cw_estimation_rcs.grc
/home/analog/gr-radar/examples/simulation/simulator_fmcw.grc
/home/analog/gr-radar/examples/simulation/simulator_fmcw_rcs.grc
/home/analog/gr-radar/examples/simulation/simulator_fsk.grc
/home/analog/gr-radar/examples/simulation/simulator_fsk_tracking_singletarget.grc
/home/analog/gr-radar/examples/simulation/simulator_ofdm.grc
/home/analog/gr-radar/examples/simulation/simulator_sync_pulse.grc
/home/analog/gr-radar/examples/tests/test_find_max_peak_c.grc
/home/analog/gr-radar/examples/tests/test_msg_manipulator.grc
/home/analog/gr-radar/examples/tests/test_signal_generator_cw_c.grc
/home/analog/gr-radar/examples/tests/test_signal_generator_fmcw_c.grc
/home/analog/gr-radar/examples/tests/test_split_cc.grc
/home/analog/gr-radar/examples/tests/test_static_target_simulator_cc.grc
/home/analog/gr-radar/examples/tests/test_ts_fft_cc.grc
/home/analog/gr-radar/examples/tests/test_uhd_sink_source_inbuild.grc
/home/analog/gr-radar/examples/tests/test_usrp_echotimer_cc.grc
/home/analog/gr-radar/examples/usrp/usrp_echotimer_cw.grc
/home/analog/gr-radar/examples/usrp/usrp_echotimer_dual_cw.grc
/home/analog/gr-radar/examples/usrp/usrp_echotimer_dual_cw_rcs.grc
/home/analog/gr-radar/examples/usrp/usrp_echotimer_dual_cw_tracking.grc
/home/analog/gr-radar/examples/usrp/usrp_echotimer_fmcw.grc
/home/analog/gr-radar/examples/usrp/usrp_echotimer_fsk.grc
/home/analog/gr-radar/examples/usrp/usrp_echotimer_fsk_tracking_singletarget.grc
/home/analog/gr-radar/examples/usrp/usrp_echotimer_sync_pulse.grc
/home/analog/gr-radar/grc
/home/analog/gr-radar/grc/CMakeLists.txt
/home/analog/gr-radar/grc/radar_crop_matrix_vcvc.block.yml
/home/analog/gr-radar/grc/radar_estimator_cw.block.yml
/home/analog/gr-radar/grc/radar_estimator_fmcw.block.yml
/home/analog/gr-radar/grc/radar_estimator_fsk.block.yml
/home/analog/gr-radar/grc/radar_estimator_ofdm.block.yml
/home/analog/gr-radar/grc/radar_estimator_rcs.block.yml
/home/analog/gr-radar/grc/radar_estimator_sync_pulse_c.block.yml
/home/analog/gr-radar/grc/radar_find_max_peak_c.block.yml
/home/analog/gr-radar/grc/radar_msg_gate.block.yml
/home/analog/gr-radar/grc/radar_msg_manipulator.block.yml
/home/analog/gr-radar/grc/radar_ofdm_cyclic_prefix_remover_cvc.block.yml
/home/analog/gr-radar/grc/radar_ofdm_divide_vcvc.block.yml
/home/analog/gr-radar/grc/radar_os_cfar_2d_vc.block.yml
/home/analog/gr-radar/grc/radar_os_cfar_c.block.yml
/home/analog/gr-radar/grc/radar_print_results.block.yml
/home/analog/gr-radar/grc/radar_qtgui_scatter_plot.block.yml
/home/analog/gr-radar/grc/radar_qtgui_spectrogram_plot.block.yml
/home/analog/gr-radar/grc/radar_qtgui_time_plot.block.yml
/home/analog/gr-radar/grc/radar_signal_generator_cw_c.block.yml
/home/analog/gr-radar/grc/radar_signal_generator_fmcw_c.block.yml
/home/analog/gr-radar/grc/radar_signal_generator_fsk_c.block.yml
/home/analog/gr-radar/grc/radar_signal_generator_sync_pulse_c.block.yml
/home/analog/gr-radar/grc/radar_split_cc.block.yml
/home/analog/gr-radar/grc/radar_split_fsk_cc.block.yml
/home/analog/gr-radar/grc/radar_static_target_simulator_cc.block.yml
/home/analog/gr-radar/grc/radar_tracking_singletarget.block.yml
/home/analog/gr-radar/grc/radar_transpose_matrix_vcvc.block.yml
/home/analog/gr-radar/grc/radar_trigger_command.block.yml
/home/analog/gr-radar/grc/radar_ts_fft_cc.block.yml
/home/analog/gr-radar/grc/radar_usrp_echotimer_cc.block.yml
/home/analog/gr-radar/hier/ts_fft_py_cc.grc
/usr/lib/python3/dist-packages/reportlab/graphics/samples/__pycache__/filled_radar.cpython-39.pyc
/usr/lib/python3/dist-packages/reportlab/graphics/samples/__pycache__/radar.cpython-39.pyc
/usr/lib/python3/dist-packages/reportlab/graphics/samples/filled_radar.py
/usr/lib/python3/dist-packages/reportlab/graphics/samples/radar.py
/usr/local/lib/python3.9/dist-packages/gnuradio/qtgui/distanceradar.py
/usr/local/lib/python3.9/dist-packages/gnuradio/qtgui/distanceradar.pyc
/usr/local/lib/python3.9/dist-packages/gnuradio/qtgui/distanceradar.pyo
/usr/local/share/gnuradio/examples/qt-gui/test_distanceradar.grc
/usr/local/share/gnuradio/grc/blocks/qtgui_distanceradar.block.yml






