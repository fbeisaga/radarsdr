estoy haciendo un receptor fm con el bloque fmcomms5 en gnu radio pero obtengo este error
Generating: '/home/analog/Desktop/EJEMPLOS/FM_BEISAGAv1.py'

Executing: /usr/bin/python3 -u /home/analog/Desktop/EJEMPLOS/FM_BEISAGAv1.py

Parsing /proc/self/auxv to extract ELF hwcaps!
Parsing /proc/self/auxv to extract ELF hwcaps!
Parsing /proc/self/auxv to extract ELF hwcaps!
Unable to write attribute out_altvoltage0_RX_LO_frequency: -13
Unable to write attribute in_voltage_sampling_frequency: -13
Unable to write attribute in_voltage_rf_bandwidth: -13
Unable to write attribute in_voltage_quadrature_tracking_en: -13
Unable to write attribute in_voltage_rf_dc_offset_tracking_en: -13
Unable to write attribute in_voltage_bb_dc_offset_tracking_en: -13
Unable to write attribute in_voltage0_gain_control_mode: -13
Unable to write attribute in_voltage0_hardwaregain: -13
Unable to write attribute in_voltage1_gain_control_mode: -13
Unable to write attribute in_voltage1_hardwaregain: -13
Unable to write attribute in_voltage0_rf_port_select: -13
Unable to write attribute out_altvoltage0_RX_LO_frequency: -13
Unable to write attribute in_voltage_sampling_frequency: -13
Unable to write attribute in_voltage_rf_bandwidth: -13
Unable to write attribute in_voltage_quadrature_tracking_en: -13
Unable to write attribute in_voltage_rf_dc_offset_tracking_en: -13
Unable to write attribute in_voltage_bb_dc_offset_tracking_en: -13
Unable to write attribute in_voltage0_gain_control_mode: -13
Unable to write attribute in_voltage0_hardwaregain: -13
Unable to write attribute in_voltage1_gain_control_mode: -13
Unable to write attribute in_voltage1_hardwaregain: -13
Unable to write attribute in_voltage0_rf_port_select: -13
gr::log :INFO: audio source - Audio sink arch: alsa
thread[thread-per-block[0]: <block fmcomms5_source(5)>]: Unable to create buffer!

ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss


analog@analog:~ $ sudo /usr/bin/python3 -u /home/analog/Desktop/EJEMPLOS/FM_BEISAGAv1.py
[sudo] password for analog:
QStandardPaths: XDG_RUNTIME_DIR not set, defaulting to '/tmp/runtime-root'
Parsing /proc/self/auxv to extract ELF hwcaps!
Parsing /proc/self/auxv to extract ELF hwcaps!
Parsing /proc/self/auxv to extract ELF hwcaps!
Traceback (most recent call last): File "/home/analog/Desktop/EJEMPLOS/FM_BEISAGAv1.py", line 217, in <module> main()
File "/home/analog/Desktop/EJEMPLOS/FM_BEISAGAv1.py", line 193, in main tb = top_block_cls()
File "/home/analog/Desktop/EJEMPLOS/FM_BEISAGAv1.py", line 141, in __init__ self.iio_fmcomms5_source_0 = iio.fmcomms5_source_f32c('local:', frecuencia, 2400000000, samp_rate, 20000000, True, False, False, False, 32768, True, True, True, 'manual', 64, 'fast_attack', 64, 'manual', 64, 'manual', 64, 'A_BALANCED', '')
AttributeError: module 'iio' has no attribute 'fmcomms5_source_f32c'

Me sale esto


ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
python3 - <<'PY'
import iio, inspect
print("iio file:", getattr(iio, "__file__", "built-in or no __file__"))
print("iio module repr:", iio)
print("some names in iio:", sorted([n for n in dir(iio) if not n.startswith("_")])[:60])
try:
    print("has fmcomms5_source_f32c?:", hasattr(iio, "fmcomms5_source_f32c"))
except Exception as e:
    print("error checking attr:", e)
PY
------------------RESPUESTA--------------
some names in iio: ['Buffer', 'Channel', 'ChannelAttr', 'ChannelModifier', 'ChannelType', 'Context', 'DataFormat', 'Device', 'DeviceAttr', 'DeviceBufferAttr', 'DeviceDebugAttr', 'Enum', 'LocalContext', 'NetworkContext', 'Structure', 'Trigger', 'XMLContext', 'abc', 'backends', 'c_bool', 'c_char', 'c_char_p', 'c_double', 'c_int', 'c_long', 'c_longlong', 'c_size_t', 'c_ssize_t', 'c_uint', 'c_void_p', 'cast', 'create_string_buffer', 'find_library', 'get_errno', 'iio_strerror', 'scan_contexts', 'version']
has fmcomms5_source_f32c?: False


# comprueba si hay librerías gr-iio en python3 site-packages
python3 -c "import pkgutil, sys; print([m.name for m in pkgutil.iter_modules() if 'iio' in m.name or 'gr_iio' in m.name])"
----RESPUESTA------
['iio']

# busca paquetes instalados por dpkg
dpkg -l | grep -i gr-iio || true
-------RESPUESTA----
ii  gr-iio                                 0.3-9+b3    armhf        IIO blocks for GnuRadio

pip3 show pyadi-iio || true
--------------RESPUESTA-----------------------
Name: pyadi-iio
Version: 0.0.19
Summary: Analog Devices python interfaces for hardware with Industrial I/O drivers
Home-page: None
Author: None
Author-email: Travis Collins <travis.collins@analog.com>
License: ADI BSD
Location: /usr/local/lib/python3.9/dist-packages
Requires: numpy, pylibiio
Required-by: 

pip3 show libiio || true
WARNING: Package(s) not found: libiio

ssssssssssssssssssssssssssssssssssssssssssssssss

analog@analog:~ $ python3 - <<'PY'
import iio, sys
print("iio file:",getattr(iio, "__file__",None))
print("has fmcomms5_source_f32c?:", hasattr(iio,"fmcomms5_source_f32c"))
PY                                       
iio file: /usr/local/lib/python3.9/dist-packages/iio.py
has fmcomms5_source_f32c?: False
analog@analog:~ $ dpkg -L gr-iio | sed -n '1,200p' | grep -i "python\|iio" || true
/usr/include/iio
/usr/include/iio/api.h
/usr/include/iio/attr_sink.h
/usr/include/iio/attr_source.h
/usr/include/iio/converter_ss.h
/usr/include/iio/device_sink.h
/usr/include/iio/device_source.h
/usr/include/iio/fmcomms2_sink.h
/usr/include/iio/fmcomms2_source.h
/usr/include/iio/fmcomms5_sink.h
/usr/include/iio/fmcomms5_source.h
/usr/include/iio/iio
/usr/include/iio/iio/swig
/usr/include/iio/iio/swig/iio_pluto_sink_swig.i
/usr/include/iio/iio/swig/iio_pluto_source_swig.i
/usr/include/iio/iio/swig/iio_swig.i
/usr/include/iio/math.h
/usr/include/iio/modulo_const_ff.h
/usr/include/iio/modulo_ff.h
/usr/include/iio/pluto_sink.h
/usr/include/iio/pluto_source.h
/usr/include/iio/power_ff.h
/usr/lib/arm-linux-gnueabihf/cmake/iio
/usr/lib/arm-linux-gnueabihf/cmake/iio/gnuradio-iioConfig.cmake
/usr/lib/arm-linux-gnueabihf/cmake/iio/gnuradio-iioTargets-none.cmake
/usr/lib/arm-linux-gnueabihf/cmake/iio/gnuradio-iioTargets.cmake
/usr/lib/arm-linux-gnueabihf/cmake/iio/iioConfig.cmake
/usr/lib/arm-linux-gnueabihf/pkgconfig/gnuradio-iio.pc
/usr/lib/python3
/usr/lib/python3/dist-packages
/usr/lib/python3/dist-packages/iio
/usr/lib/python3/dist-packages/iio/__init__.py
/usr/lib/python3/dist-packages/iio/_iio_pluto_sink_swig.cpython-39-arm-linux-gnueabihf.so
/usr/lib/python3/dist-packages/iio/_iio_pluto_source_swig.cpython-39-arm-linux-gnueabihf.so
/usr/lib/python3/dist-packages/iio/_iio_swig.cpython-39-arm-linux-gnueabihf.so
/usr/lib/python3/dist-packages/iio/attr_updater.py
/usr/lib/python3/dist-packages/iio/iio_pluto_sink_swig.py
/usr/lib/python3/dist-packages/iio/iio_pluto_source_swig.py
/usr/lib/python3/dist-packages/iio/iio_swig.py
/usr/share/doc/gr-iio
/usr/share/doc/gr-iio/changelog.Debian.armhf.gz
/usr/share/doc/gr-iio/changelog.Debian.gz
/usr/share/doc/gr-iio/copyright
/usr/share/gnuradio/grc/blocks/iio.tree.yml
/usr/share/gnuradio/grc/blocks/iio_attr_sink.block.yml
/usr/share/gnuradio/grc/blocks/iio_attr_source.block.yml
/usr/share/gnuradio/grc/blocks/iio_attr_updater.block.yml
/usr/share/gnuradio/grc/blocks/iio_device_sink.block.yml
/usr/share/gnuradio/grc/blocks/iio_device_source.block.yml
/usr/share/gnuradio/grc/blocks/iio_fmcomms2_sink.block.yml
/usr/share/gnuradio/grc/blocks/iio_fmcomms2_source.block.yml
/usr/share/gnuradio/grc/blocks/iio_fmcomms5_sink.block.yml
/usr/share/gnuradio/grc/blocks/iio_fmcomms5_source.block.yml
/usr/share/gnuradio/grc/blocks/iio_pluto_sink.block.yml
/usr/share/gnuradio/grc/blocks/iio_pluto_source.block.yml
/usr/lib/arm-linux-gnueabihf/libgnuradio-iio.so
analog@analog:~ $ python3 - <<'PY'                                                
import sys
for i,p in enumerate(sys.path[:10]):
     print(i, p)
PY
0 
1 /usr/lib/python39.zip
2 /usr/lib/python3.9
3 /usr/lib/python3.9/lib-dynload
4 /usr/local/lib/python3.9/dist-packages
5 /usr/lib/python3/dist-packages
6 /usr/lib/python3.9/dist-packages

--------------RESPUESTA----------------
sudo mkdir -p /root/iio_backups
sudo mv /usr/local/lib/python3.9/dist-packages/iio.py /root/iio_backups/iio.py.backup
# si existe un paquete iio (carpeta) también muévelo
if [ -d /usr/local/lib/python3.9/dist-packages/iio ]; then
  sudo mv /usr/local/lib/python3.9/dist-packages/iio /root/iio_backups/iio_pkg_backup
fi


python3 - <<'PY'
import iio, sys
print("iio.__file__ =", getattr(iio, "__file__", None))
print("has fmcomms5_source_f32c?:", hasattr(iio, "fmcomms5_source_f32c"))
print("sys.path (first 6):", sys.path[:6])
PY

/usr/bin/python3 /home/analog/Desktop/EJEMPLOS/FM_BEISAGAv1.py

#RESTAURAR PAQUETE PIP
sudo mv /root/iio_backups/iio.py.backup /usr/local/lib/python3.9/dist-packages/iio.py
# y la carpeta si la habías movido
sudo mv /root/iio_backups/iio_pkg_backup /usr/local/lib/python3.9/dist-packages/iio

----------------------------RESPUESTA---------------
Generating: '/home/analog/Desktop/EJEMPLOS/FM_BEISAGAv1.py'

Executing: /usr/bin/python3 -u /home/analog/Desktop/EJEMPLOS/FM_BEISAGAv1.py

QStandardPaths: XDG_RUNTIME_DIR not set, defaulting to '/tmp/runtime-root'
Parsing /proc/self/auxv to extract ELF hwcaps!
Parsing /proc/self/auxv to extract ELF hwcaps!
Parsing /proc/self/auxv to extract ELF hwcaps!
Unable to write attribute in_voltage0_hardwaregain: -95
Unable to write attribute in_voltage1_hardwaregain: -95
gr::log :INFO: audio source - Audio sink arch: alsa
gr::log :ERROR: audio_alsa_sink0 - [default]: Device or resource busy
Traceback (most recent call last):
  File "/home/analog/Desktop/EJEMPLOS/FM_BEISAGAv1.py", line 217, in <module>
    main()
  File "/home/analog/Desktop/EJEMPLOS/FM_BEISAGAv1.py", line 193, in main
    tb = top_block_cls()
  File "/home/analog/Desktop/EJEMPLOS/FM_BEISAGAv1.py", line 142, in __init__
    self.audio_sink_0 = audio.sink(48000, '', True)
  File "/usr/lib/python3/dist-packages/gnuradio/audio/audio_swig.py", line 182, in make
    return _audio_swig.sink_make(*args, **kwargs)
RuntimeError: audio_alsa_sink

Esto se obtiene al hacer lo anterior

-------------------------------------------------------------------------------

analog@analog:~ $ /usr/bin/python3 -u /home/analog/Desktop/EJEMPLOS/FM_BEISAGAv1.py
Parsing /proc/self/auxv to extract ELF hwcaps!
Parsing /proc/self/auxv to extract ELF hwcaps!
Parsing /proc/self/auxv to extract ELF hwcaps!
Unable to write attribute out_altvoltage0_RX_LO_frequency: -13
Unable to write attribute in_voltage_sampling_frequency: -13
Unable to write attribute in_voltage_rf_bandwidth: -13
Unable to write attribute in_voltage_quadrature_tracking_en: -13
Unable to write attribute in_voltage_rf_dc_offset_tracking_en: -13
Unable to write attribute in_voltage_bb_dc_offset_tracking_en: -13
Unable to write attribute in_voltage0_gain_control_mode: -13
Unable to write attribute in_voltage0_hardwaregain: -13
Unable to write attribute in_voltage1_gain_control_mode: -13
Unable to write attribute in_voltage1_hardwaregain: -13
Unable to write attribute in_voltage0_rf_port_select: -13
Unable to write attribute out_altvoltage0_RX_LO_frequency: -13
Unable to write attribute in_voltage_sampling_frequency: -13
Unable to write attribute in_voltage_rf_bandwidth: -13
Unable to write attribute in_voltage_quadrature_tracking_en: -13
Unable to write attribute in_voltage_rf_dc_offset_tracking_en: -13
Unable to write attribute in_voltage_bb_dc_offset_tracking_en: -13
Unable to write attribute in_voltage0_gain_control_mode: -13
Unable to write attribute in_voltage0_hardwaregain: -13
Unable to write attribute in_voltage1_gain_control_mode: -13
Unable to write attribute in_voltage1_hardwaregain: -13
Unable to write attribute in_voltage0_rf_port_select: -13
gr::log :INFO: audio source - Audio sink arch: alsa
thread[thread-per-block[0]: <block fmcomms5_source(5)>]: Unable to create buffer!                                                                                                                               PROBA esto modifica atributos del ad9361-------------------------------------------------------------------------------------------------
python3 - <<'PY'
import iio
ctx = iio.Context("local:")
phy = ctx.find_device("ad9361-phy")
rx0 = phy.find_channel("voltage0", False)  # RX0 entrada
# Cambia a manual y fija una ganancia válida (p.ej. 50 dB)
rx0.attrs["gain_control_mode"].value = "manual"
rx0.attrs["hardwaregain"].value = "50"
print("OK, se pudo escribir sin sudo")
PY

